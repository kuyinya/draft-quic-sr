<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>Segment Routing over QUIC(QUIC-SR)</title>
<meta content="Kevin Fang" name="author">
<meta content="Yinghao Li" name="author">
<meta content="Feng Cai" name="author">
<meta content="
       This document defines the Segment Routing Header  extension
in QUIC transport protocol. 
    " name="description">
<meta content="xml2rfc 2.44.0" name="generator">
<meta content="draft-zartbot-quic-sr-00" name="ietf.draft">
<link href="draft-zartbot-quic-sr.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">@import url('https://martinthomson.github.io/i-d-template/fonts.css');

html {
  --background-color: #fff;
  --text-color: #222;
  --title-color: #191919;
  --link-color: #2a6496;
  --highlight-color: #f9f9f9;
  --line-color: #eee;
  --small-font-size: 14.5px;
}
body {
  max-width: 600px;
  margin: 75px auto;
  padding: 0 5px;
  color: var(--text-color);
  background-color: var(--background-color);
  font: 16px/22px "Lora", serif;
  scroll-behavior: smooth;
}

.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  font-family: "Cabin Condensed", sans-serif;
  font-weight: 600;
  margin: 0.8em 0 0.3em;
  font-size-adjust: 0.5;
  color: var(--title-color);
}
#title {
  padding: 1em 0 0.2em;
  font-size: 32px;
  line-height: 40px;
  clear: both;
}
h1, h2, h3 {
  font-size: 22px;
  line-height: 26px;
}
h4, h5, h6 {
  font-size: 18px;
  line-height: 22px;
}

/* general structure */
.author {
  padding-bottom: 0.3em;
}
#abstract+p, #abstract+p code, #abstract+p samp, #abstract+p tt {
  font-size: 18px;
  line-height: 24px;
}
p {
  padding: 0;
  margin: 0.5em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignRight.art-text pre {
  padding: 0;
  width: auto;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignCenter.art-text pre {
  padding: 0;
  width: auto;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}
dd.break {
  display: none;
}

/* links */
a, a[href].selfRef:hover {
  text-decoration: none;
}
a[href].selfRef {
  color: var(--text-color);
}
a[href] {
  color: var(--link-color);
}
a[href]:hover {
  text-decoration: underline;
}
a[href].selfRef:hover {
  background-color: var(--highlight-color);
}
a.xref {
  white-space: nowrap;
}

/* Figures */
tt, code, pre {
  background-color: var(--highlight-color);
  font: 14px/22px 'Oxygen Mono', monospace;
}
pre {
  border: 1px solid var(--line-color);
  font-size: 13.5px;
  line-height: 16px;
  letter-spacing: -0.2px;
  margin: 5px;
  padding: 5px;
}
img {
  max-width: 100%;
}
figure {
  margin: 0.5em 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption, caption {
  font-style: italic;
  margin: 0.5em 1.5em;
  text-align: left;
}
@media screen {
  pre {
    display: inline-block;
    overflow-x: auto;
    max-width: 100%;
    width: calc(100% - 22px - 1em);
  }
  figure pre {
    display: block;
    width: calc(100% - 25px);
  }
  pre + .pilcrow {
    display: inline-block;
    vertical-align: text-bottom;
    padding-bottom: 8px;
  }
  table {
    display: inline-block;
    overflow-x: auto;
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 0 2em;
  font-style: italic;
}
blockquote {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid var(--line-color);
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #eee;
}
tr:nth-child(2n) > td {
  background-color: var(--background-color);
}
tr:nth-child(2n+1) > td {
  background-color: var(--highlight-color);
}
thead+tbody tr:nth-child(2n) > td {
  background-color: var(--highlight-color);
}
thead+tbody tr:nth-child(2n+1) > td {
  background-color: var(--background-color);
}
table caption {
  margin: 0;
  padding: 3px 1em;
  border-top: 1px solid var(--line-color);
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  margin-left: 3px;
  visibility: hidden;
  user-select: none;
}
a.pilcrow[href] { color: #ddd; }
a.pilcrow[href]:hover { text-decoration: none; }
@media screen {
  :hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid var(--line-color);
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: var(--small-font-size);
  line-height: 18px;
  --identifier-width: 8em;
}
#identifiers dt {
  width: var(--identifier-width);
  margin: 0;
  clear: left;
  float: left;
  text-align: right;
}
#identifiers dd {
  margin: 0 0 0 calc(1em + var(--identifier-width));
  min-width: 5em;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #999;
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
#toc nav ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
#toc nav li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
#toc a.xref {
  white-space: normal;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 500px) {
  .index ul {
    column-count: 2;
    column-gap: 20px;
  }
  .index ul ul {
    column-count: 1;
    column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}
address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}
@media (min-width: 500px) {
  #authors-addresses > section {
    display: relative;
    padding: 32px 0 0;
    column-count: 2;
    column-gap: 20px;
  }
  #name-authors-addresses {
    position: absolute;
    top: 0px;
    column-span: all;
  }
  /* hack for break-inside: avoid-column */
  #authors-addresses address {
    display: inline-block;
    break-inside: avoid-column;
  }
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #b76427;
  background-color: rgba(249, 232, 105, 0.3);
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: rgba(249, 232, 105, 0.3);
  border-radius: 3px;
}
.cref {
  background-color: rgba(249, 232, 105, 0.3);
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 929px) {
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    border-bottom: 1px solid #ccc;
    opacity: 0.6;
  }
  #toc.active {
      opacity: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 2px 0 2px 6px;
    padding-right: 1em;
    font-size: 18px;
    line-height: 24px;
    min-width: 190px;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 8px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    background-color: var(--background-color);
    padding: 0.5em 1em 1em;
    overflow: auto;
    overscroll-behavior: contain;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
  #toc.active nav {
    display: block;
  }
  /* Make the collapsed ToC header render white on gray also when it's a link */
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
  #toc a.toplink {
    margin-top: 2px;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 930px) {
  body {
    padding-right: 360px;
    padding-right: calc(min(180px + 20%, 500px));
  }
  #toc {
    position: fixed;
    bottom: 0;
    right: 0;
    right: calc(50vw - 480px);
    width: 312px;
    margin: 0;
    padding: 0;
    z-index: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 2em;
    overflow: auto;
    overscroll-behavior: contain;
    scrollbar-width: thin;
  }
  #toc nav > ul  {
    margin-bottom: 2em;
  }
  #toc ul {
    margin: 0 0 0 4px;
    font-size: var(--small-font-size);
  }
  #toc ul p, #toc ul li {
    margin: 2px 0;
    line-height: 22px;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
}

/* Changes introduced to fix issues found during implementation */

/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}

/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin: 8px 0.5em 0;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table .text-left, table .text-left {
  text-align: left;
}
table .text-center, table .text-center {
  text-align: center;
}
table .text-right, table .text-right {
  text-align: right;
}

/* Make the alternative author contact information look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 20em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  dd {
    page-break-before: avoid;
  }
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
</head>
<body>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">Segment Routing over QUIC</td>
<td class="right">May 2020</td>
</tr></thead>
<tfoot><tr>
<td class="left">Fang, et al.</td>
<td class="center">Expires 20 November 2020</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">QUIC</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-zartbot-quic-sr-00</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2020-05-19" class="published">19 May 2020</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Experimental</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2020-11-20">20 November 2020</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">K. Fang</div>
<div class="org">Cisco Systems, Inc.</div>
</div>
<div class="author">
      <div class="author-name">Y. Li</div>
<div class="org">Google, Inc.</div>
</div>
<div class="author">
      <div class="author-name">F. Cai</div>
<div class="org">Cisco Systems, Inc.</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">Segment Routing over QUIC(QUIC-SR)</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This document defines the Segment Routing Header<span>[<a href="#RFC8754" class="xref">RFC8754</a>]</span> extension
in QUIC transport protocol.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 20 November 2020.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2020 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Simplified BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Simplified BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction" class="xref">Introduction</a><a href="#section-toc.1-1.1.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1" class="keepWithNext"><a href="#section-1.1" class="xref">1.1</a>.  <a href="#name-specification-of-requiremen" class="xref">Specification of Requirements</a><a href="#section-toc.1-1.1.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.1.2.2">
                <p id="section-toc.1-1.1.2.2.1" class="keepWithNext"><a href="#section-1.2" class="xref">1.2</a>.  <a href="#name-motivation" class="xref">Motivation</a><a href="#section-toc.1-1.1.2.2.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="xref">2</a>.  <a href="#name-quic-sr-packet-type" class="xref">QUIC-SR Packet Type</a><a href="#section-toc.1-1.2.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.2.2.1">
                <p id="section-toc.1-1.2.2.1.1"><a href="#section-2.1" class="xref">2.1</a>.  <a href="#name-quic-sr-packet" class="xref">QUIC-SR Packet</a><a href="#section-toc.1-1.2.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.2.2.2">
                <p id="section-toc.1-1.2.2.2.1"><a href="#section-2.2" class="xref">2.2</a>.  <a href="#name-quic-sr-header" class="xref">QUIC-SR Header</a><a href="#section-toc.1-1.2.2.2.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="xref">3</a>.  <a href="#name-packet-processing" class="xref">Packet Processing</a><a href="#section-toc.1-1.3.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a href="#section-3.1" class="xref">3.1</a>.  <a href="#name-type0x0-ipv4-locator-mode" class="xref">Type:0x0, IPv4 Locator Mode</a><a href="#section-toc.1-1.3.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="xref">3.2</a>.  <a href="#name-type0x1-64bit-segment-mode" class="xref">Type:0x1, 64bit Segment mode</a><a href="#section-toc.1-1.3.2.2.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.3.2.3">
                <p id="section-toc.1-1.3.2.3.1"><a href="#section-3.3" class="xref">3.3</a>.  <a href="#name-type0x2-ipv6-srh" class="xref">Type:0x2, IPv6 SRH</a><a href="#section-toc.1-1.3.2.3.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.3.2.4">
                <p id="section-toc.1-1.3.2.4.1"><a href="#section-3.4" class="xref">3.4</a>.  <a href="#name-nat-travasal-and-dynamic-po" class="xref">NAT Travasal and dynamic port mapping</a><a href="#section-toc.1-1.3.2.4.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.3.2.4.2.1">
                    <p id="section-toc.1-1.3.2.4.2.1.1"><a href="#section-3.4.1" class="xref">3.4.1</a>.  <a href="#name-option1-stun-server-mode" class="xref">Option.1 STUN Server mode</a><a href="#section-toc.1-1.3.2.4.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.3.2.4.2.2">
                    <p id="section-toc.1-1.3.2.4.2.2.1"><a href="#section-3.4.2" class="xref">3.4.2</a>.  <a href="#name-option2-peer-cache-mode" class="xref">Option.2 Peer Cache mode</a><a href="#section-toc.1-1.3.2.4.2.2.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.3.2.5">
                <p id="section-toc.1-1.3.2.5.1"><a href="#section-3.5" class="xref">3.5</a>.  <a href="#name-optional-tlv-2" class="xref">Optional TLV</a><a href="#section-toc.1-1.3.2.5.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.3.2.5.2.1">
                    <p id="section-toc.1-1.3.2.5.2.1.1"><a href="#section-3.5.1" class="xref">3.5.1</a>.  <a href="#name-sr-integrity-tlv" class="xref">SR Integrity TLV</a><a href="#section-toc.1-1.3.2.5.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.3.2.5.2.2">
                    <p id="section-toc.1-1.3.2.5.2.2.1"><a href="#section-3.5.2" class="xref">3.5.2</a>.  <a href="#name-micro-segmentationuseg" class="xref">Micro-segmentation(uSeg)</a><a href="#section-toc.1-1.3.2.5.2.2.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.3.2.5.2.3">
                    <p id="section-toc.1-1.3.2.5.2.3.1"><a href="#section-3.5.3" class="xref">3.5.3</a>.  <a href="#name-endpacketinfo" class="xref">End.PacketInfo</a><a href="#section-toc.1-1.3.2.5.2.3.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-usage" class="xref">Usage</a><a href="#section-toc.1-1.4.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="xref">4.1</a>.  <a href="#name-traffic-engineering-over-in" class="xref">Traffic engineering over Internet</a><a href="#section-toc.1-1.4.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="xref">4.2</a>.  <a href="#name-multipath-forwarding" class="xref">Multipath forwarding</a><a href="#section-toc.1-1.4.2.2.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a href="#section-4.3" class="xref">4.3</a>.  <a href="#name-micro-segmentation" class="xref">Micro Segmentation</a><a href="#section-toc.1-1.4.2.3.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.4.2.4">
                <p id="section-toc.1-1.4.2.4.1"><a href="#section-4.4" class="xref">4.4</a>.  <a href="#name-container-network" class="xref">Container Network</a><a href="#section-toc.1-1.4.2.4.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.4.2.5">
                <p id="section-toc.1-1.4.2.5.1"><a href="#section-4.5" class="xref">4.5</a>.  <a href="#name-standard-sdwan-encapsulatio" class="xref">Standard SDWAN Encapsulation</a><a href="#section-toc.1-1.4.2.5.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.4.2.6">
                <p id="section-toc.1-1.4.2.6.1"><a href="#section-4.6" class="xref">4.6</a>.  <a href="#name-mpls-sr-with-sdwan" class="xref">MPLS-SR with SDWAN</a><a href="#section-toc.1-1.4.2.6.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-iana-considerations" class="xref">IANA Considerations</a><a href="#section-toc.1-1.5.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="xref">5.1</a>.  <a href="#name-quic-sr-packet-2" class="xref">QUIC-SR Packet</a><a href="#section-toc.1-1.5.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a href="#section-5.2" class="xref">5.2</a>.  <a href="#name-quic-sr-port" class="xref">QUIC-SR Port</a><a href="#section-toc.1-1.5.2.2.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref"></a><a href="#name-acknowledgements" class="xref">Acknowledgements</a><a href="#section-toc.1-1.6.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref"></a><a href="#name-references" class="xref">References</a><a href="#section-toc.1-1.7.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a href="#section-7.1" class="xref"></a><a href="#name-normative-references" class="xref">Normative References</a><a href="#section-toc.1-1.7.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a href="#section-7.2" class="xref"></a><a href="#name-informative-references" class="xref">Informative References</a><a href="#section-toc.1-1.7.2.2.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-appendix.a" class="xref"></a><a href="#name-authors-addresses" class="xref">Authors' Addresses</a><a href="#section-toc.1-1.8.1" class="pilcrow">¶</a></p>
</li>
</ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">The QUIC Transport Protocol <span>[<a href="#I-D.ietf-quic-transport" class="xref">I-D.ietf-quic-transport</a>]</span> provides a secure,
multiplexed connection for transmitting reliable streams of application data.
CONNECTION-ID provides IP address independently transportation, thus allowing
multipath transportation.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">Enable Segment routing for QUIC(QUIC-SR) provides more flexibility for endpoint
to select multipath to reduce latency and avoid packet drop.<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">This document defines a new QUIC-SR packet types.<a href="#section-1-3" class="pilcrow">¶</a></p>
<p id="section-1-4">Discussion of this work is encouraged to happen on GitHub repository which
contains the draft: <a href="https://github.com/zartbot/draft-quic-sr">https://github.com/zartbot/draft-quic-sr</a><a href="#section-1-4" class="pilcrow">¶</a></p>
<div id="specification-of-requirements">
<section id="section-1.1">
        <h3 id="name-specification-of-requiremen">
<a href="#section-1.1" class="section-number selfRef">1.1. </a><a href="#name-specification-of-requiremen" class="section-name selfRef">Specification of Requirements</a>
        </h3>
<p id="section-1.1-1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
"SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
"OPTIONAL" in this document are to be interpreted as described in BCP 14
<span>[<a href="#RFC2119" class="xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="xref">RFC8174</a>]</span> when, and only when,
they appear in all capitals, as shown here.<a href="#section-1.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="motivation">
<section id="section-1.2">
        <h3 id="name-motivation">
<a href="#section-1.2" class="section-number selfRef">1.2. </a><a href="#name-motivation" class="section-name selfRef">Motivation</a>
        </h3>
<p id="section-1.2-1">Segment Routing provides source-based path enforcement and transportation level
programmability but lacks of IPv4 support for transport over internet.<a href="#section-1.2-1" class="pilcrow">¶</a></p>
<p id="section-1.2-2">MPLS-over-UDP<span>[<a href="#RFC7510" class="xref">RFC7510</a>]</span> and MPLS Segment Routing over IP<span>[<a href="#RFC8663" class="xref">RFC8663</a>]</span>
defined SR-MPLS over IPv4 network, but it lacks of NAT traversal capabilities.<a href="#section-1.2-2" class="pilcrow">¶</a></p>
<p id="section-1.2-3">Many SDWAN vendors defined their private protocols for routing control over
multiple public cloud and internet, it's hard for interop with multi-vendors.<a href="#section-1.2-3" class="pilcrow">¶</a></p>
<p id="section-1.2-4">QUIC provides connection migration and CONNECTION-ID definition which could
provide IP address independent forwarding mechanism and cloud be easily use
for NAT traversal and easy for load balance <span>[<a href="#I-D.ietf-quic-load-balancers" class="xref">I-D.ietf-quic-load-balancers</a>]</span>.<a href="#section-1.2-4" class="pilcrow">¶</a></p>
<p id="section-1.2-5">QUIC also supports reliable transportation for general purpose applications and
unreliable transportation <span>[<a href="#I-D.ietf-quic-datagram" class="xref">I-D.ietf-quic-datagram</a>]</span> for low-latency
applications.<a href="#section-1.2-5" class="pilcrow">¶</a></p>
<p id="section-1.2-6">QUIC provides a secure transportation and low-latency connection establishment.
It could be the best general-purpose transport protocol for SD-WAN.<a href="#section-1.2-6" class="pilcrow">¶</a></p>
<p id="section-1.2-7">Add Segment Routing  as a new packet type in QUIC will provide more
flexibility and general-purpose programmability for multi-vendor and multi-cloud
deployment.<a href="#section-1.2-7" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="quic-sr-packet-type">
<section id="section-2">
      <h2 id="name-quic-sr-packet-type">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-quic-sr-packet-type" class="section-name selfRef">QUIC-SR Packet Type</a>
      </h2>
<p id="section-2-1">The Segment Routing information MUST be present as clear-text in data payload.
A new QUIC-SR packet type is required.<a href="#section-2-1" class="pilcrow">¶</a></p>
<div id="quic-sr-packet">
<section id="section-2.1">
        <h3 id="name-quic-sr-packet">
<a href="#section-2.1" class="section-number selfRef">2.1. </a><a href="#name-quic-sr-packet" class="section-name selfRef">QUIC-SR Packet</a>
        </h3>
<p id="section-2.1-1">QUIC-SR Packet means a QUIC packet type that could be encapsulated
in UDP payload.<a href="#section-2.1-1" class="pilcrow">¶</a></p>
<span id="name-segment-routing-quic-packet"></span><div id="sr-pkt-format">
<figure id="figure-1">
          <div class="artwork art-text alignLeft" id="section-2.1-2.1">
<pre>
QUIC-SR Packet {
  Header Form (1) = 1,
  Fixed Bit (1) = 1,
  Long Packet Type (2) = 0,
  -----------------------
  QUIC-SR Flag(1) =  1,
  Unused (3),
  -----------------------
  Version (32),
  DCID Length (8),
  Destination Connection ID (0..160),
  SCID Length (8),
  Source Connection ID (0..160),
  QUIC-SR Header (..),
}
</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-segment-routing-quic-packet" class="selfRef">Segment Routing QUIC Packet Type</a>
          </figcaption></figure>
</div>
<p id="section-2.1-3">QUIC Long Header packet type(2bits) is fully used, Need to work with QUIC-WG
to extend one bit for Segment Routing Packet type.<a href="#section-2.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="quic-sr-header">
<section id="section-2.2">
        <h3 id="name-quic-sr-header">
<a href="#section-2.2" class="section-number selfRef">2.2. </a><a href="#name-quic-sr-header" class="section-name selfRef">QUIC-SR Header</a>
        </h3>
<p id="section-2.2-1">QUIC-SR Header is defined in the following figure:<a href="#section-2.2-1" class="pilcrow">¶</a></p>
<span id="name-quic-sr-header-2"></span><div id="srh-format">
<figure id="figure-2">
          <div class="artwork art-text alignLeft" id="section-2.2-2.1">
<pre>
  0                   1                   2                   3
  0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 | Segment Type  |  SR Hdr Len   | Last Entry    | Segments Left |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |                                                               |
 |            Segment List[0] (32-bit/ 64-bit / 128-bit )        |
 |                                                               |
 |                                                               |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |                                                               |
 |                                                               |
                               ...
 |                                                               |
 |                                                               |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |                                                               |
 |            Segment List[n] (32-bit/ 64-bit / 128-bit )        |
 |                                                               |
 |                                                               |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 //                                                             //
 //         Optional Type Length Value objects (variable)       //
 //                                                             //
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-quic-sr-header-2" class="selfRef">QUIC-SR Header</a>
          </figcaption></figure>
</div>
<p id="section-2.2-3">Segment Type:
      Defined 4 type of segment list<a href="#section-2.2-3" class="pilcrow">¶</a></p>
<span id="name-segment-types"></span><div id="segment-types">
<table class="center" id="table-1">
          <caption>
<a href="#table-1" class="selfRef">Table 1</a>:
<a href="#name-segment-types" class="selfRef">Segment Types</a>
          </caption>
<thead>
            <tr>
              <th class="text-right" rowspan="1" colspan="1">Type</th>
              <th class="text-left" rowspan="1" colspan="1">Name</th>
              <th class="text-left" rowspan="1" colspan="1">Len</th>
              <th class="text-left" rowspan="1" colspan="1">Section</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-right" rowspan="1" colspan="1">0x0</td>
              <td class="text-left" rowspan="1" colspan="1">IPv4 Locator Only</td>
              <td class="text-left" rowspan="1" colspan="1">32b</td>
              <td class="text-left" rowspan="1" colspan="1">
                <a href="#ipv4-locator" class="xref">Section 3.1</a>
</td>
            </tr>
            <tr>
              <td class="text-right" rowspan="1" colspan="1">0x1</td>
              <td class="text-left" rowspan="1" colspan="1">64bit Segment Mode</td>
              <td class="text-left" rowspan="1" colspan="1">64b</td>
              <td class="text-left" rowspan="1" colspan="1">
                <a href="#type1-64b-locator" class="xref">Section 3.2</a>
</td>
            </tr>
            <tr>
              <td class="text-right" rowspan="1" colspan="1">0x2</td>
              <td class="text-left" rowspan="1" colspan="1">IPv6 SRH</td>
              <td class="text-left" rowspan="1" colspan="1">128b</td>
              <td class="text-left" rowspan="1" colspan="1">
                <a href="#srv6-locator" class="xref">Section 3.3</a>
</td>
            </tr>
          </tbody>
        </table>
</div>
<dl class="dlParallel" id="section-2.2-5">
          <dt id="section-2.2-5.1">SR Hdr Len:</dt>
<dd id="section-2.2-5.2">
  QUIC-SR Header length<a href="#section-2.2-5.2" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
<dt id="section-2.2-5.3">Last Entry:</dt>
<dd id="section-2.2-5.4">
  contains the index(zero based), in the Segment List, of
the last element of the Segment List.<a href="#section-2.2-5.4" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
<dt id="section-2.2-5.5">Segments Left:</dt>
<dd id="section-2.2-5.6">
  8-bit unsigned integer. Number of route segemnts remaining,
i.e., number of explicitly listed intermediate nodes still
to be visited before reaching the final destination.<a href="#section-2.2-5.6" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
<dt id="section-2.2-5.7">Segment List[0..n]:</dt>
<dd id="section-2.2-5.8">
  32-bit/64-bit/128-bit addresses to represnet the SR Policy.
Detailed forwarding behavior will be defined in <a href="#pkt-proccessing" class="xref">Section 3</a><a href="#section-2.2-5.8" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
<dt id="section-2.2-5.9">TLV:</dt>
<dd id="section-2.2-5.10">
  Opptional TLV used for future extension.currently only defined
the following TLV.<a href="#section-2.2-5.10" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
</dl>
<span id="name-optional-tlv"></span><div id="optional-tlv-types">
<table class="center" id="table-2">
          <caption>
<a href="#table-2" class="selfRef">Table 2</a>:
<a href="#name-optional-tlv" class="selfRef">Optional TLV</a>
          </caption>
<thead>
            <tr>
              <th class="text-right" rowspan="1" colspan="1">Type</th>
              <th class="text-left" rowspan="1" colspan="1">Value</th>
              <th class="text-left" rowspan="1" colspan="1">Len</th>
              <th class="text-left" rowspan="1" colspan="1">Section</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-right" rowspan="1" colspan="1">0x0</td>
              <td class="text-left" rowspan="1" colspan="1">SR Integrity</td>
              <td class="text-left" rowspan="1" colspan="1">32b</td>
              <td class="text-left" rowspan="1" colspan="1">
                <a href="#sr-integrity" class="xref">Section 3.5.1</a>
</td>
            </tr>
            <tr>
              <td class="text-right" rowspan="1" colspan="1">0x1</td>
              <td class="text-left" rowspan="1" colspan="1">Micro Segment Policy</td>
              <td class="text-left" rowspan="1" colspan="1">variable</td>
              <td class="text-left" rowspan="1" colspan="1">
                <a href="#useg-policy" class="xref">Section 3.5.2</a>
</td>
            </tr>
            <tr>
              <td class="text-right" rowspan="1" colspan="1">0x2</td>
              <td class="text-left" rowspan="1" colspan="1">End.PacketInfo</td>
              <td class="text-left" rowspan="1" colspan="1">variable</td>
              <td class="text-left" rowspan="1" colspan="1">
                <a href="#end-packet-info" class="xref">Section 3.5.3</a>
</td>
            </tr>
          </tbody>
        </table>
</div>
</section>
</div>
</section>
</div>
<div id="pkt-proccessing">
<section id="section-3">
      <h2 id="name-packet-processing">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-packet-processing" class="section-name selfRef">Packet Processing</a>
      </h2>
<p id="section-3-1">This section describe the packet proccessing procedure. The following
topology will be used in this section.<a href="#section-3-1" class="pilcrow">¶</a></p>
<span id="name-topology-for-packet-procces"></span><div id="pp-topology">
<figure id="figure-3">
        <div class="artwork art-text alignLeft" id="section-3-2.1">
<pre>
H1---+-----R1------I1------R3------R4------H2
     |                              |
     |-----R2------I2---------------|

I1,I2: Interim Node that support QUIC-SR
R1~R4: Traditional Router
H1,H2: Host
</pre>
</div>
<figcaption><a href="#figure-3" class="selfRef">Figure 3</a>:
<a href="#name-topology-for-packet-procces" class="selfRef">Topology for packet proccesing</a>
        </figcaption></figure>
</div>
<div id="ipv4-locator">
<section id="section-3.1">
        <h3 id="name-type0x0-ipv4-locator-mode">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-type0x0-ipv4-locator-mode" class="section-name selfRef">Type:0x0, IPv4 Locator Mode</a>
        </h3>
<p id="section-3.1-1">In this mode, the endpoint could directly insert the interim node IPv4
addresses into the segment-list.<a href="#section-3.1-1" class="pilcrow">¶</a></p>
<p id="section-3.1-2">For example, H1 intend to send packet to H2 via R1-&gt;I1-&gt;R3-&gt;R4,<a href="#section-3.1-2" class="pilcrow">¶</a></p>
<p id="section-3.1-3">H1 send packet with SRH as below:<a href="#section-3.1-3" class="pilcrow">¶</a></p>
<span id="name-type0x0-h1-i1-packet-header"></span><div id="type-0-h1-I1">
<figure id="figure-4">
          <div class="artwork art-text alignLeft" id="section-3.1-4.1">
<pre>
IP/UDP Header {
  Source IP: H1,
  Destination IP: I1,
  Source Port: srcport,
  Destination Port: QUIC-SR,
}
QUIC-SR Header {
  SegmentType = 0x0,
  SR_HDR_Len = 2,
  Last Entry = 0x1,
  Segment Left = 1,
  SegmenetList[0] = H2,
  SegmenetList[1] = I1,
}
</pre>
</div>
<figcaption><a href="#figure-4" class="selfRef">Figure 4</a>:
<a href="#name-type0x0-h1-i1-packet-header" class="selfRef">Type:0x0 H1--&gt;I1 Packet Header</a>
          </figcaption></figure>
</div>
<p id="section-3.1-5">I1 is QUIC-SR enabled Node,It will swap the IP Header and reduce
segment left field, then forward packet to H2.<a href="#section-3.1-5" class="pilcrow">¶</a></p>
<span id="name-type0x0-i1-h2-packet-header"></span><div id="type-0-I1-H2">
<figure id="figure-5">
          <div class="artwork art-text alignLeft" id="section-3.1-6.1">
<pre>
IP/UDP Header {
  Source IP: H1,
  Destination IP: H2,
  Source Port: srcport,
  Destination Port: QUIC-SR,
}
QUIC-SR Header {
  SegmentType = 0x0,
  SR_HDR_Len = 2,
  Last Entry = 0x1,
  Segment Left = 0,
  SegmenetList[0] = H2,
  SegmenetList[1] = I1,
}
</pre>
</div>
<figcaption><a href="#figure-5" class="selfRef">Figure 5</a>:
<a href="#name-type0x0-i1-h2-packet-header" class="selfRef">Type:0x0 I1--&gt;h2 Packet Header</a>
          </figcaption></figure>
</div>
</section>
</div>
<div id="type1-64b-locator">
<section id="section-3.2">
        <h3 id="name-type0x1-64bit-segment-mode">
<a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-type0x1-64bit-segment-mode" class="section-name selfRef">Type:0x1, 64bit Segment mode</a>
        </h3>
<p id="section-3.2-1">64bit segment mode is encoded as below:<a href="#section-3.2-1" class="pilcrow">¶</a></p>
<span id="name-64bit-sr-header-in-quic"></span><div id="type-1-format">
<figure id="figure-6">
          <div class="artwork art-text alignLeft" id="section-3.2-2.1">
<pre>
  0                   1                   2                   3
  0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 | Function                      | Args          | T | Reserved  |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |                            Locator                            |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

 T: defined locator type, 0x0=IPv4,0x1=MPLS,0x2=VNID

</pre>
</div>
<figcaption><a href="#figure-6" class="selfRef">Figure 6</a>:
<a href="#name-64bit-sr-header-in-quic" class="selfRef">64bit SR Header in QUIC</a>
          </figcaption></figure>
</div>
<p id="section-3.2-3">Currently no plan to implement this type. But this type could be used in the
following scenario:<a href="#section-3.2-3" class="pilcrow">¶</a></p>
<ul>
<li id="section-3.2-4.1">MPLS-SR with SDWAN : combined IPv4 + SID locators<a href="#section-3.2-4.1" class="pilcrow">¶</a>
</li>
<li id="section-3.2-4.2">IPv4 Locator(32b) + Function(16b) + Args(8b)<a href="#section-3.2-4.2" class="pilcrow">¶</a>
</li>
</ul>
</section>
</div>
<div id="srv6-locator">
<section id="section-3.3">
        <h3 id="name-type0x2-ipv6-srh">
<a href="#section-3.3" class="section-number selfRef">3.3. </a><a href="#name-type0x2-ipv6-srh" class="section-name selfRef">Type:0x2, IPv6 SRH</a>
        </h3>
<p id="section-3.3-1">In this mode, If the QUIC-SR header does not contain optional TLV,Interim Node
could copy the SRH to IPv6 Header, and remove the QUIC-SR Packet in UDP payload.<a href="#section-3.3-1" class="pilcrow">¶</a></p>
<p id="section-3.3-2">If the QUIC-SR contains optional TLV, the segment forwarding behaviour is same
as <span>[<a href="#RFC8754" class="xref">RFC8754</a>]</span>, but the last node must proccesing optional TLV.<a href="#section-3.3-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="nat-travasal-and-dynamic-port-mapping">
<section id="section-3.4">
        <h3 id="name-nat-travasal-and-dynamic-po">
<a href="#section-3.4" class="section-number selfRef">3.4. </a><a href="#name-nat-travasal-and-dynamic-po" class="section-name selfRef">NAT Travasal and dynamic port mapping</a>
        </h3>
<p id="section-3.4-1">QUIC is encapsulated in standard UDP packet, to ensure the packet send to
correct quic socket.2 options are listed for future usage<a href="#section-3.4-1" class="pilcrow">¶</a></p>
<div id="option1-stun-server-mode">
<section id="section-3.4.1">
          <h4 id="name-option1-stun-server-mode">
<a href="#section-3.4.1" class="section-number selfRef">3.4.1. </a><a href="#name-option1-stun-server-mode" class="section-name selfRef">Option.1 STUN Server mode</a>
          </h4>
<p id="section-3.4.1-1">Each of the QUIC-SR enabled device use QUIC-SR port listen INADDR_ANY, then use
QUIC-SR port as source port to send packet to STUN<span>[<a href="#RFC5389" class="xref">RFC5389</a>]</span> Server to
discovery the NATted public ip port. Then it must send this mapping to a K-V
store for other QUIC-SR enabled device query.<a href="#section-3.4.1-1" class="pilcrow">¶</a></p>
<p id="section-3.4.1-2">A pre-allocated Segment-ID could be used as key:<a href="#section-3.4.1-2" class="pilcrow">¶</a></p>
<span id="name-quic-sr-node-sid-and-pub-pr"></span><div id="quic-node-sid">
<table class="center" id="table-3">
            <caption>
<a href="#table-3" class="selfRef">Table 3</a>:
<a href="#name-quic-sr-node-sid-and-pub-pr" class="selfRef">QUIC-SR node SID and pub/priv mapping</a>
            </caption>
<thead>
              <tr>
                <th class="text-right" rowspan="1" colspan="1">SID</th>
                <th class="text-left" rowspan="1" colspan="1">private IP:Port</th>
                <th class="text-left" rowspan="1" colspan="1">Public IP:Port</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">111</td>
                <td class="text-left" rowspan="1" colspan="1">192.168.1.2:QUIC-SR</td>
                <td class="text-left" rowspan="1" colspan="1">1.1.1.1:12345</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">222</td>
                <td class="text-left" rowspan="1" colspan="1">192.168.1.2:QUIC-SR</td>
                <td class="text-left" rowspan="1" colspan="1">2.2.2.2:45312</td>
              </tr>
            </tbody>
          </table>
</div>
<p id="section-3.4.1-4">Then the QUIC-SR header could use uSID<span>[<a href="#I-D.filsfils-spring-net-pgm-extension-srv6-usid" class="xref">I-D.filsfils-spring-net-pgm-extension-srv6-usid</a>]</span> 
for path encoding to reduce overhead.<a href="#section-3.4.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="option2-peer-cache-mode">
<section id="section-3.4.2">
          <h4 id="name-option2-peer-cache-mode">
<a href="#section-3.4.2" class="section-number selfRef">3.4.2. </a><a href="#name-option2-peer-cache-mode" class="section-name selfRef">Option.2 Peer Cache mode</a>
          </h4>
<p id="section-3.4.2-1">When device recieve upstream packet on QUIC-SR socket, it MUST cache the
CONNECTION-ID and source IP/Port, then resend by it's own socket to nexthop.<a href="#section-3.4.2-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="optional-tlv">
<section id="section-3.5">
        <h3 id="name-optional-tlv-2">
<a href="#section-3.5" class="section-number selfRef">3.5. </a><a href="#name-optional-tlv-2" class="section-name selfRef">Optional TLV</a>
        </h3>
<div id="sr-integrity">
<section id="section-3.5.1">
          <h4 id="name-sr-integrity-tlv">
<a href="#section-3.5.1" class="section-number selfRef">3.5.1. </a><a href="#name-sr-integrity-tlv" class="section-name selfRef">SR Integrity TLV</a>
          </h4>
<p id="section-3.5.1-1">SR Integrity Tag to validate the SRH. All fields in the SRH except
 Segments Left fields need to be checked.<a href="#section-3.5.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="useg-policy">
<section id="section-3.5.2">
          <h4 id="name-micro-segmentationuseg">
<a href="#section-3.5.2" class="section-number selfRef">3.5.2. </a><a href="#name-micro-segmentationuseg" class="section-name selfRef">Micro-segmentation(uSeg)</a>
          </h4>
<p id="section-3.5.2-1">Micro-segmentation is a cyber security technique that segments the network based
on a diverse set of variables to describe various security zones. In addition to
utilizing IPs and VLANs, micro-segmentation allows security zones(microsegments)
to be described using various host-centric attributes (such as OS, hardware, 
behavior) or application-driven attributes (such as where the workload is 
residing and how it is behaving) in order to improve visibility and security 
around those attributes and behaviors.<span>[<a href="#MICRO-SEG-DEF" class="xref">MICRO-SEG-DEF</a>]</span><a href="#section-3.5.2-1" class="pilcrow">¶</a></p>
<p id="section-3.5.2-2">Option-TLV could defined Sub-TLV to support Micro-segmentation<a href="#section-3.5.2-2" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-3.5.2-3">
<pre>
  OptionTLV {
    0x1, uSeg{
        0x0, SRC_GROUP_ID,
        0x1, DST_GROUP_ID,
        0x2, APP_GROUP_ID,
        0x3, SRC_DEVICE_ID,
        0x4, DST_DEVICE_ID,
        0x5, APP_ID,
    }
  }
</pre><a href="#section-3.5.2-3" class="pilcrow">¶</a>
</div>
<p id="section-3.5.2-4">This policy tag could be added by interim network device, and the src/dst
group id and device id could be encoded in CONNECTION-ID to reduce packet 
overhead.<a href="#section-3.5.2-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="end-packet-info">
<section id="section-3.5.3">
          <h4 id="name-endpacketinfo">
<a href="#section-3.5.3" class="section-number selfRef">3.5.3. </a><a href="#name-endpacketinfo" class="section-name selfRef">End.PacketInfo</a>
          </h4>
<p id="section-3.5.3-1">This optional TLV defines extened packet info and Segment-end packet edit
function. Sub-TLV defines as below:<a href="#section-3.5.3-1" class="pilcrow">¶</a></p>
<div id="type0x0-vpn-id">
<section id="section-3.5.3.1">
            <h5 id="name-type0x0-vpn-id">
<a href="#section-3.5.3.1" class="section-number selfRef">3.5.3.1. </a><a href="#name-type0x0-vpn-id" class="section-name selfRef">Type:0x0, VPN-ID</a>
            </h5>
<p id="section-3.5.3.1-1">The SDWAN Router could use <span>[<a href="#I-D.ietf-quic-datagram" class="xref">I-D.ietf-quic-datagram</a>]</span> as VPN tunnel, This
 Sub-TLV defined the VPN-ID inside the tunnel.<a href="#section-3.5.3.1-1" class="pilcrow">¶</a></p>
<p id="section-3.5.3.1-2">If QUIC-SR header has this sub-TLV, the device MUST decrypt inner payload and
 use the VPN-ID for inner packet destination lookup.<a href="#section-3.5.3.1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="type0x1-edit-destination-port">
<section id="section-3.5.3.2">
            <h5 id="name-type0x1-edit-destination-po">
<a href="#section-3.5.3.2" class="section-number selfRef">3.5.3.2. </a><a href="#name-type0x1-edit-destination-po" class="section-name selfRef">Type:0x1, Edit Destination Port</a>
            </h5>
<p id="section-3.5.3.2-1">The interim QUIC-SR enabled router need to proccess packet on dedicated port,
 this sub-TLV is used to store the original quic socket destination port.<a href="#section-3.5.3.2-1" class="pilcrow">¶</a></p>
<p id="section-3.5.3.2-2">If Segment Left = 0, the Device must replace it's destination port based on
 the sub-TLV defined value.<a href="#section-3.5.3.2-2" class="pilcrow">¶</a></p>
<p id="section-3.5.3.2-3">For exmaple, topology is shown as <a href="#pp-topology" class="xref">Figure 3</a>, H1 must send traffic to I1
 with Destination Port = QUIC-SR.<a href="#section-3.5.3.2-3" class="pilcrow">¶</a></p>
<span id="name-portmapping-h1-i1-packet-he"></span><div id="pmap-H1-I1">
<figure id="figure-7">
              <div class="artwork art-text alignLeft" id="section-3.5.3.2-4.1">
<pre>
IP/UDP Header {
  Source IP: H1,
  Destination IP: H2,
  Source Port: srcport,
  Destination Port: QUIC-SR,  //sr-quic-port
}
QUIC-SR Header {
  SegmentType = 0x0,
  SR_HDR_Len = 2,
  Last Entry = 0x1,
  Segment Left = 1,
  SegmenetList[0] = H2,
  SegmenetList[1] = I1,
  OptionTLV {
    0x1, PacketInfo{
        0x1, DestinationPort: PortH2
    }
  }
}
</pre>
</div>
<figcaption><a href="#figure-7" class="selfRef">Figure 7</a>:
<a href="#name-portmapping-h1-i1-packet-he" class="selfRef">PortMapping H1--&gt;I1 Packet Header</a>
              </figcaption></figure>
</div>
<p id="section-3.5.3.2-5">When I1 recieved the packet, and reduce the Segment Left field to 0.
It will trigger I1 proccess option TLV to change the dest port to PortH2<a href="#section-3.5.3.2-5" class="pilcrow">¶</a></p>
<span id="name-portmapping-i1-h2-packet-he"></span><div id="pmap-I1-H2">
<figure id="figure-8">
              <div class="artwork art-text alignLeft" id="section-3.5.3.2-6.1">
<pre>
IP/UDP Header {
  Source IP: H1,
  Destination IP: H2,
  Source Port: srcport,
  Destination Port: PortH2,  //h2 port
}
QUIC-SR Header {
  SegmentType = 0x0,
  SR_HDR_Len = 2,
  Last Entry = 0x1,
  Segment Left = 0,
  SegmenetList[0] = H2,
  SegmenetList[1] = I1,
  OptionTLV {
    0x1, PacketInfo{
        0x1, DestinationPort: PortH2
    }
  }
}
</pre>
</div>
<figcaption><a href="#figure-8" class="selfRef">Figure 8</a>:
<a href="#name-portmapping-i1-h2-packet-he" class="selfRef">PortMapping I1--&gt;H2 Packet Header</a>
              </figcaption></figure>
</div>
</section>
</div>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="usage">
<section id="section-4">
      <h2 id="name-usage">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-usage" class="section-name selfRef">Usage</a>
      </h2>
<div id="traffic-engineering-over-internet">
<section id="section-4.1">
        <h3 id="name-traffic-engineering-over-in">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-traffic-engineering-over-in" class="section-name selfRef">Traffic engineering over Internet</a>
        </h3>
<span id="name-traffic-engineering-over-int"></span><div id="use-1">
<figure id="figure-9">
          <div class="artwork art-text alignLeft" id="section-4.1-1.1">
<pre>
Client-------R1------------Internet--------------R2-----------Server
             |                                    |
             |                                    |
             R3----V1----PubliCloud--------V2-----|
</pre>
</div>
<figcaption><a href="#figure-9" class="selfRef">Figure 9</a>:
<a href="#name-traffic-engineering-over-int" class="selfRef">Traffic Engineering over internet</a>
          </figcaption></figure>
</div>
<p id="section-4.1-2">network traffic will go through R1 and R2, but it's congested or link failured.
Cloud provider or network admin cloud setup QUIC-SR enabled NFV on public cloud.
Client could use V1/V2 forward traffic and avoid congestion.<a href="#section-4.1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="multipath-forwarding">
<section id="section-4.2">
        <h3 id="name-multipath-forwarding">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-multipath-forwarding" class="section-name selfRef">Multipath forwarding</a>
        </h3>
<p id="section-4.2-1">Same as previously topoloy<a href="#use-1" class="xref">Figure 9</a>, customer cloud ask server transmit packet
over different path, two path have same CONNECTION-ID, and could be shared with
different QUIC stream.<a href="#section-4.2-1" class="pilcrow">¶</a></p>
<p id="section-4.2-2">In this scenario, V1,V2 could implement Source address/port based NAT to make
sure the server-&gt;client forwarding path are symmetric.<a href="#section-4.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="micro-segmentation">
<section id="section-4.3">
        <h3 id="name-micro-segmentation">
<a href="#section-4.3" class="section-number selfRef">4.3. </a><a href="#name-micro-segmentation" class="section-name selfRef">Micro Segmentation</a>
        </h3>
<p id="section-4.3-1">Same as previously topoloy<a href="#use-1" class="xref">Figure 9</a>, the interim Router: R1/R2/R3, V1,V2 could
insert uSeg Sub-TLV based on client and server uSeg identity, and other interim
network equipment could based on this sub-TLV implement security policy or QoS
policy.<a href="#section-4.3-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="container-network">
<section id="section-4.4">
        <h3 id="name-container-network">
<a href="#section-4.4" class="section-number selfRef">4.4. </a><a href="#name-container-network" class="section-name selfRef">Container Network</a>
        </h3>
<span id="name-service-mesh-container-netw"></span><div id="use-3">
<figure id="figure-10">
          <div class="artwork art-text alignLeft" id="section-4.4-1.1">
<pre>
C1----SideCar1-----L1-----S1------L2----SideCar2-------C2
                   |               |
                   |------S2-------|
C1,C2: Container
L1,L2: Leaf switch
S1,S2: Spine switch
</pre>
</div>
<figcaption><a href="#figure-10" class="selfRef">Figure 10</a>:
<a href="#name-service-mesh-container-netw" class="selfRef">Service-Mesh &amp; Container Network</a>
          </figcaption></figure>
</div>
<p id="section-4.4-2">QUIC-SR also could be used for container network interface, especially for 
service-mesh sidecar. The sidecar could aware the Datacenter underlay topology
by BGP-LinkState, and use SRH select best path to avoid congestion. At the same
time, all traffic are encrypted by <span>[<a href="#I-D.ietf-quic-tls" class="xref">I-D.ietf-quic-tls</a>]</span>.<a href="#section-4.4-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="standard-sdwan-encapsulation">
<section id="section-4.5">
        <h3 id="name-standard-sdwan-encapsulatio">
<a href="#section-4.5" class="section-number selfRef">4.5. </a><a href="#name-standard-sdwan-encapsulatio" class="section-name selfRef">Standard SDWAN Encapsulation</a>
        </h3>
<p id="section-4.5-1">In SDWAN era, different vendor defined different encapsulation format, it's very
hard for interop accross multiple cloud. QUIC-SR gives a standard encapsulation
proposal.<a href="#section-4.5-1" class="pilcrow">¶</a></p>
<span id="name-standard-sdwan"></span><div id="std-sdwan">
<figure id="figure-11">
          <div class="artwork art-text alignLeft" id="section-4.5-2.1">
<pre>
QUIC-SR Header {
  SegmentType = 0x0,
  SR_HDR_Len = 2,
  Last Entry = 0x1,
  Segment Left = 0,
  SegmenetList[0] = H2,
  SegmenetList[1] = I1,
  OptionTLV {
    0x1, PacketInfo{
        0x0, VPN-ID: VPN-ID
    }
  }
}
</pre>
</div>
<figcaption><a href="#figure-11" class="selfRef">Figure 11</a>:
<a href="#name-standard-sdwan" class="selfRef">Standard SDWAN</a>
          </figcaption></figure>
</div>
<p id="section-4.5-3">QUIC transport protocol provides the following benefit for SDWAN :<a href="#section-4.5-3" class="pilcrow">¶</a></p>
<ul>
<li id="section-4.5-4.1">Stream multiplexing<a href="#section-4.5-4.1" class="pilcrow">¶</a>
</li>
<li id="section-4.5-4.2">Stream and connection-level flow control<a href="#section-4.5-4.2" class="pilcrow">¶</a>
</li>
<li id="section-4.5-4.3">Low-latency connection establishment<a href="#section-4.5-4.3" class="pilcrow">¶</a>
</li>
<li id="section-4.5-4.4">Connection migration and resilience to NAT rebinding<a href="#section-4.5-4.4" class="pilcrow">¶</a>
</li>
<li id="section-4.5-4.5">Authenticated and encrypted header and payload<a href="#section-4.5-4.5" class="pilcrow">¶</a>
</li>
</ul>
<p id="section-4.5-5">QUIC-SR add traffic-engineering and VPN capabilites for SDWAN.
Many existing SDWAN features could gain the benefits like:<a href="#section-4.5-5" class="pilcrow">¶</a></p>
<ul>
<li id="section-4.5-6.1">TCP optimization<a href="#section-4.5-6.1" class="pilcrow">¶</a>
</li>
<li id="section-4.5-6.2">Packet duplication<a href="#section-4.5-6.2" class="pilcrow">¶</a>
</li>
</ul>
</section>
</div>
<div id="mpls-sr-with-sdwan">
<section id="section-4.6">
        <h3 id="name-mpls-sr-with-sdwan">
<a href="#section-4.6" class="section-number selfRef">4.6. </a><a href="#name-mpls-sr-with-sdwan" class="section-name selfRef">MPLS-SR with SDWAN</a>
        </h3>
<span id="name-mpls-sr-with-sdwan-2"></span><div id="sr-sdwan-topology">
<figure id="figure-12">
          <div class="artwork art-text alignLeft" id="section-4.6-1.1">
<pre>
S1---INET(ipv4)----PE1------MPLS------PE2----S2

S1,S2: SDWAN Router
PE1,PE2: SR enabled MPLS PE
</pre>
</div>
<figcaption><a href="#figure-12" class="selfRef">Figure 12</a>:
<a href="#name-mpls-sr-with-sdwan-2" class="selfRef">MPLS-SR with SDWAN</a>
          </figcaption></figure>
</div>
<p id="section-4.6-2">S1 will setup QUIC socket with S2 for end-to-end encryption,
And it will use BSID between PE1-PE2 for traffic engineering.<a href="#section-4.6-2" class="pilcrow">¶</a></p>
<p id="section-4.6-3">MPLS based BSID and IPv4 based locator could be encoded in uSID.A distributed
mapping table could be used to translate uSID to packet action.<a href="#section-4.6-3" class="pilcrow">¶</a></p>
<span id="name-type0x1-s1-pe1-packet-heade"></span><div id="type-1-s1-pe1">
<figure id="figure-13">
          <div class="artwork art-text alignLeft" id="section-4.6-4.1">
<pre>
IP/UDP Header {
  Source IP: H1,
  Destination IP: PE1,
  Source Port: srcport,
  Destination Port: QUIC-SR,
}
QUIC-SR Header {
  SegmentType = 0x1,
  SR_HDR_Len = 2,
  Last Entry = 0x0,
  Segment Left = 0,
  SegmenetList[0] = uSID: FC0:2222:3333:4444::
}
</pre>
</div>
<figcaption><a href="#figure-13" class="selfRef">Figure 13</a>:
<a href="#name-type0x1-s1-pe1-packet-heade" class="selfRef">Type:0x1 S1--&gt;PE1 Packet Header</a>
          </figcaption></figure>
</div>
</section>
</div>
</section>
</div>
<div id="iana-considerations">
<section id="section-5">
      <h2 id="name-iana-considerations">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<div id="quic-sr-packet-1">
<section id="section-5.1">
        <h3 id="name-quic-sr-packet-2">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-quic-sr-packet-2" class="section-name selfRef">QUIC-SR Packet</a>
        </h3>
<p id="section-5.1-1">This document registers a new value in the QUIC Long Long Packet Header:<a href="#section-5.1-1" class="pilcrow">¶</a></p>
<p id="section-5.1-2">Original:<a href="#section-5.1-2" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-5.1-3">
<pre>
Long Header Packet {
  Header Form (1) = 1,
  Fixed Bit (1) = 1,
  ----------------------
  Long Packet Type (2),
  Unused (4),
  ----------------------
  ...omit...
}
</pre><a href="#section-5.1-3" class="pilcrow">¶</a>
</div>
<p id="section-5.1-4">Changed if this document is approved:<a href="#section-5.1-4" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-5.1-5">
<pre>
QUIC-SR Packet {
  Header Form (1) = 1,
  Fixed Bit (1) = 1,
  ----------------------
  Long Packet Type (2) = 0,
  QUIC-SR Flag(1) =  1,
  Unused (3),
  ----------------------
  ...omit...
}
</pre><a href="#section-5.1-5" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="quic-sr-port">
<section id="section-5.2">
        <h3 id="name-quic-sr-port">
<a href="#section-5.2" class="section-number selfRef">5.2. </a><a href="#name-quic-sr-port" class="section-name selfRef">QUIC-SR Port</a>
        </h3>
<p id="section-5.2-1">A dedicated UDP port need to be allocated to QUIC-SR<a href="#section-5.2-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="acknowledgements">
<section id="section-6">
      <h2 id="name-acknowledgements">
<a href="#name-acknowledgements" class="section-name selfRef">Acknowledgements</a>
      </h2>
<p id="section-6-1">The following people provided substantial contributions to this document:<a href="#section-6-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-6-2.1">Bin Shi, Cisco Systems, Inc.<a href="#section-6-2.1" class="pilcrow">¶</a>
</li>
<li id="section-6-2.2">Yijen Wang, Cisco Systems, Inc.<a href="#section-6-2.2" class="pilcrow">¶</a>
</li>
<li id="section-6-2.3">Pix Xu, Cisco Systems, Inc.<a href="#section-6-2.3" class="pilcrow">¶</a>
</li>
<li id="section-6-2.4">Xing James Jiang, Cisco Systems, Inc.<a href="#section-6-2.4" class="pilcrow">¶</a>
</li>
</ul>
</section>
</div>
<section id="section-7">
      <h2 id="name-references">
<a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-7.1">
        <h3 id="name-normative-references">
<a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="I-D.filsfils-spring-net-pgm-extension-srv6-usid">[I-D.filsfils-spring-net-pgm-extension-srv6-usid]</dt>
<dd>
<span class="refAuthor">Filsfils, C.</span><span class="refAuthor">, Camarillo, P.</span><span class="refAuthor">, Cai, D.</span><span class="refAuthor">, Voyer, D.</span><span class="refAuthor">, Meilik, I.</span><span class="refAuthor">, Patel, K.</span><span class="refAuthor">, Henderickx, W.</span><span class="refAuthor">, Jonnalagadda, P.</span><span class="refAuthor">, Melman, D.</span><span class="refAuthor">, and Y. Liu</span>, <span class="refTitle">"Network Programming extension: SRv6 uSID instruction"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-filsfils-spring-net-pgm-extension-srv6-usid-05</span>, <time datetime="2020-05-18">18 May 2020</time>, <span>&lt;<a href="http://www.ietf.org/internet-drafts/draft-filsfils-spring-net-pgm-extension-srv6-usid-05.txt">http://www.ietf.org/internet-drafts/draft-filsfils-spring-net-pgm-extension-srv6-usid-05.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-quic-datagram">[I-D.ietf-quic-datagram]</dt>
<dd>
<span class="refAuthor">Pauly, T.</span><span class="refAuthor">, Kinnear, E.</span><span class="refAuthor">, and D. Schinazi</span>, <span class="refTitle">"An Unreliable Datagram Extension to QUIC"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-quic-datagram-00</span>, <time datetime="2020-02-26">26 February 2020</time>, <span>&lt;<a href="http://www.ietf.org/internet-drafts/draft-ietf-quic-datagram-00.txt">http://www.ietf.org/internet-drafts/draft-ietf-quic-datagram-00.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-quic-load-balancers">[I-D.ietf-quic-load-balancers]</dt>
<dd>
<span class="refAuthor">Duke, M.</span><span class="refAuthor"> and N. Banks</span>, <span class="refTitle">"QUIC-LB: Generating Routable QUIC Connection IDs"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-quic-load-balancers-02</span>, <time datetime="2020-03-09">9 March 2020</time>, <span>&lt;<a href="http://www.ietf.org/internet-drafts/draft-ietf-quic-load-balancers-02.txt">http://www.ietf.org/internet-drafts/draft-ietf-quic-load-balancers-02.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-quic-tls">[I-D.ietf-quic-tls]</dt>
<dd>
<span class="refAuthor">Thomson, M.</span><span class="refAuthor"> and S. Turner</span>, <span class="refTitle">"Using TLS to Secure QUIC"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-quic-tls-27</span>, <time datetime="2020-02-21">21 February 2020</time>, <span>&lt;<a href="http://www.ietf.org/internet-drafts/draft-ietf-quic-tls-27.txt">http://www.ietf.org/internet-drafts/draft-ietf-quic-tls-27.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-quic-transport">[I-D.ietf-quic-transport]</dt>
<dd>
<span class="refAuthor">Iyengar, J.</span><span class="refAuthor"> and M. Thomson</span>, <span class="refTitle">"QUIC: A UDP-Based Multiplexed and Secure Transport"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-quic-transport-27</span>, <time datetime="2020-02-21">21 February 2020</time>, <span>&lt;<a href="http://www.ietf.org/internet-drafts/draft-ietf-quic-transport-27.txt">http://www.ietf.org/internet-drafts/draft-ietf-quic-transport-27.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="MICRO-SEG-DEF">[MICRO-SEG-DEF]</dt>
<dd>
<span class="refAuthor">Elena Garrett, .</span>, <span class="refTitle">"Network Micro-Segmentation vs. Traditional Network Segmentation"</span>, <time datetime="2018-02">February 2018</time>, <span>&lt;<a href="https://www.linkedin.com/pulse/adaptive-network-micro-segmentation-elena-garrett/">https://www.linkedin.com/pulse/adaptive-network-micro-segmentation-elena-garrett/</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5389">[RFC5389]</dt>
<dd>
<span class="refAuthor">Rosenberg, J.</span><span class="refAuthor">, Mahy, R.</span><span class="refAuthor">, Matthews, P.</span><span class="refAuthor">, and D. Wing</span>, <span class="refTitle">"Session Traversal Utilities for NAT (STUN)"</span>, <span class="seriesInfo">RFC 5389</span>, <span class="seriesInfo">DOI 10.17487/RFC5389</span>, <time datetime="2008-10">October 2008</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5389">https://www.rfc-editor.org/info/rfc5389</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7510">[RFC7510]</dt>
<dd>
<span class="refAuthor">Xu, X.</span><span class="refAuthor">, Sheth, N.</span><span class="refAuthor">, Yong, L.</span><span class="refAuthor">, Callon, R.</span><span class="refAuthor">, and D. Black</span>, <span class="refTitle">"Encapsulating MPLS in UDP"</span>, <span class="seriesInfo">RFC 7510</span>, <span class="seriesInfo">DOI 10.17487/RFC7510</span>, <time datetime="2015-04">April 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7510">https://www.rfc-editor.org/info/rfc7510</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8663">[RFC8663]</dt>
<dd>
<span class="refAuthor">Xu, X.</span><span class="refAuthor">, Bryant, S.</span><span class="refAuthor">, Farrel, A.</span><span class="refAuthor">, Hassan, S.</span><span class="refAuthor">, Henderickx, W.</span><span class="refAuthor">, and Z. Li</span>, <span class="refTitle">"MPLS Segment Routing over IP"</span>, <span class="seriesInfo">RFC 8663</span>, <span class="seriesInfo">DOI 10.17487/RFC8663</span>, <time datetime="2019-12">December 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8663">https://www.rfc-editor.org/info/rfc8663</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8754">[RFC8754]</dt>
<dd>
<span class="refAuthor">Filsfils, C., Ed.</span><span class="refAuthor">, Dukes, D., Ed.</span><span class="refAuthor">, Previdi, S.</span><span class="refAuthor">, Leddy, J.</span><span class="refAuthor">, Matsushima, S.</span><span class="refAuthor">, and D. Voyer</span>, <span class="refTitle">"IPv6 Segment Routing Header (SRH)"</span>, <span class="seriesInfo">RFC 8754</span>, <span class="seriesInfo">DOI 10.17487/RFC8754</span>, <time datetime="2020-03">March 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8754">https://www.rfc-editor.org/info/rfc8754</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-7.2">
        <h3 id="name-informative-references">
<a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="RFC2119">[RFC2119]</dt>
<dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
<dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="authors-addresses">
<section id="section-appendix.a">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Kevin Fang</span></div>
<div dir="auto" class="left"><span class="org">Cisco Systems, Inc.</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:zartbot.ietf@gmail.com" class="email">zartbot.ietf@gmail.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Yinghao Li</span></div>
<div dir="auto" class="left"><span class="org">Google, Inc.</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:liyinghao@gmail.com" class="email">liyinghao@gmail.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Feng Cai</span></div>
<div dir="auto" class="left"><span class="org">Cisco Systems, Inc.</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:fecai@cisco.com" class="email">fecai@cisco.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
